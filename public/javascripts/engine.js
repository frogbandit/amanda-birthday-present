(function(){function n(){$(".container").fadeIn(1e3)}function r(){$(".container").fadeOut(1e3)}function i(e){$('<div class="story-log">'+e+"</div>").hide().prependTo(".story-content").fadeIn("slow")}function s(){$("<hr>").hide().prependTo(".story-content").fadeIn("slow")}function o(e){$(".context-location").fadeOut("fast",function(){$(".context-location").html(e).fadeIn("fast")})}function u(e){$(".context-time").fadeOut("fast",function(){$(".context-time").html(e).fadeIn("fast")})}function a(e){$('<div class="context-note">'+e+"</div>").hide().prependTo(".context-notes").fadeIn("slow")}function f(){$(".context-notes").fadeOut("fast",function(){$(this).empty().show()})}function l(e){t=[];for(var n=0;n<e.length;n++){var r=y(e[n]);t.push(r);$('<div class="procedure-action" id="'+r+'">'+e[n]+"</div>").hide().prependTo(".procedure-content").fadeIn("fast")}}function c(e){var n=y(e);t.push(n);$('<div class="procedure-action" id="'+n+'">'+e+"</div>").hide().prependTo(".procedure-content").fadeIn("fast")}function h(){t=[];$(".procedure-content").fadeOut("fast",function(){$(this).empty().show()})}function p(e){$(".procedure-action#"+e).addClass("disabled");t.remove(e)}function d(){$("input.submission").val("");g()}function v(e){$(".alert-text").html(e);$(".alert-text").fadeIn("fast",function(){setTimeout(function(){$(".alert-text").fadeOut("fast")},1e3)})}function m(){$("img.loading-gif").fadeIn("fast")}function g(){$("img.loading-gif").fadeOut("fast")}function y(e){return e.toLowerCase().replace(/^[.\s]+|[.\s]+$/g,"").replace(/\s+/g,"-")}function b(){$(".ending").fadeIn("slow")}function w(){v("Chapter 1 — The Room");i("A dark room.");setTimeout(function(){a("A dark room.");setTimeout(function(){o("Unknown");u("Unknown");setTimeout(function(){E()},5e3)},1e3)},1e3)}function E(){i("A distant drone of traffic.");setTimeout(function(){a("Sounds like a nearby highway.");setTimeout(function(){l(["Feel around."])},1e3)},1e3)}function S(){i("There's a lamp here.");setTimeout(function(){l(["Feel around more.","Flick lamp on."]);d()},1e3)}function x(){if(e=="4b"){setTimeout(function(){d();N()},1e3)}else{i("A bright and blurry room.");setTimeout(function(){a("The room is bright, but blurry.");e="4a";d()},1e3)}}function T(){i("A pair of glasses.");if(e=="4a"){setTimeout(function(){d();N()},1e3)}else{e="4b";d()}}function N(){i("The hotel room comes into focus.");setTimeout(function(){a("A quiet hotel room. Where am I?");setTimeout(function(){l(["Look around."])},1e3)},1e3)}function C(){i("A bag on the carpeted floor.");setTimeout(function(){i("A window with drawn curtains.");setTimeout(function(){l(["Draw curtains.","Investigate bag."]);d()},1e3)},1e3)}function k(){i('"Jane Street".');setTimeout(function(){i("There's a smartphone in here.");setTimeout(function(){c("Investigate smartphone.");d()},1e3)},1e3)}function L(){i("A busy Wall Street morning.");setTimeout(function(){o("Wall Street - New York, NY");if(e=="7c"){d();O()}else{e="7b";d()}},1e3)}function A(){i('"10:30 A.M. EDT".');setTimeout(function(){u("10:30 A.M. EDT");setTimeout(function(){a("Hope I won't miss my flight.");if(e=="7b"){d();O()}else{e="7c";d()}},1e3)},1e3)}function O(){setTimeout(function(){l(["Leave hotel."])},1e3)}function M(){i("Packed and ready to go.");setTimeout(function(){d();_()},1e3)}function _(){v("Chapter 2 — JFK International Airport");s();f();h();setTimeout(function(){o("JFK Airport - New York, NY");u("11:20 A.M. EDT");setTimeout(function(){D()},1e3)},1e3)}function D(){i("The subway doors close and the train departs.");setTimeout(function(){a("Looks like a busy day at the airport.");setTimeout(function(){l(["Enter airport."])},1e3)},1e3)}function P(){i("A blast of cool airport AC.");setTimeout(function(){a("Feeling a little thirsty...");setTimeout(function(){l(["Open bag.","Check in luggage."]);d()},1e3)},1e3)}function H(){i("A long check-in line.");setTimeout(function(){if(e=="13c"){d();l(["Finish check-in."])}else{a("Looks like a long wait...");setTimeout(function(){e="13a";d()},1e3)}},1e3)}function B(){i("No water, but a slip of paper?");setTimeout(function(){c("Investigate slip of paper.");d()},1e3)}function j(){i("A boarding pass printed last night.");setTimeout(function(){a("I can use this to skip the line.");setTimeout(function(){if(e=="13a"){d();l(["Finish check-in."])}else{e="13c";d()}},1e3)},1e3)}function F(){u("11:45 A.M. EDT");setTimeout(function(){i("A distant security checkpoint.");setTimeout(function(){d();l(["Enter security checkpoint.","Investigate boarding pass."])},1e3)},1e3)}function I(){u("12:15 P.M. EDT");setTimeout(function(){if(e=="15b"){i("Security check successful.");setTimeout(function(){d();l(["Proceed to terminal."])},1e3)}else{i("Security check successful.");setTimeout(function(){a("Where to now?");setTimeout(function(){e="15a";d()},1e3)},1e3)}},1e3)}function q(){i('"JetBlue Airways Corporation"... Terminal 4.');setTimeout(function(){a("Looks like the flight is at Terminal 4.");setTimeout(function(){if(e=="15a"){d();l(["Proceed to terminal."])}else{e="15b";d()}},1e3)},1e3)}function R(){v("Chapter 3 — Home");d();s();f();h();setTimeout(function(){o("Californian skies");u("4:00 P.M. PDT");setTimeout(function(){U()},1e3)},1e3)}function U(){i('INTERCOM: "Folks, we have begun our descent into San Jose. We will arrive at the gate in roughly 20 minutes. Thank you for flying today with JetBlue."');setTimeout(function(){a("A beautiful view of the San Francisco Bay Area.");setTimeout(function(){z()},7e3)},1e3)}function z(){u("4:15 P.M. PDT");setTimeout(function(){i('INTERCOM: "Please fasten your seat belts and raise your chairs to the upright position. We will be landing shortly."');setTimeout(function(){l(["Fasten seat belt."])},1e3)},1e3)}function W(){i("Seat belt fastened.");setTimeout(function(){i("The plane descends...");setTimeout(function(){d();X()},5e3)},1e3)}function X(){u("4:20 P.M. PDT");setTimeout(function(){i('INTERCOM: "We have landed at San Jose International Airport."');setTimeout(function(){i('INTERCOM: "The time is 4:20 PM, and the temperature is 72 degrees Fahrenheit. Thank you again for flying with us."');setTimeout(function(){o("SJC - San Jose, CA");setTimeout(function(){V()},3e3)},1e3)},1e3)},1e3)}function V(){i("A text from Dad.");setTimeout(function(){l(["Check text.","Exit plane."])},1e3)}function J(){i("A busy SJC terminal.");setTimeout(function(){a("Finally home...");setTimeout(function(){if(e=="22b"){d();Q()}else{a("Better check Dad's text, though...");setTimeout(function(){e="22a";d()},1e3)}},1e3)},1e3)}function K(){i('DAD: "Just arrived at the airport with Yoyo."');setTimeout(function(){a("Just in time.");setTimeout(function(){if(e=="22a"){d();Q()}else{e="22b";d()}},1e3)},1e3)}function Q(){a("I should find my luggage.");setTimeout(function(){l(["Enter baggage claim."])},1e3)}function G(){i("A long conveyer belt lined with colorful luggage.");setTimeout(function(){l(["Find luggage."]);d()},1e3)}function Y(){u("4:45 P.M. PDT");setTimeout(function(){i("Good to go.");setTimeout(function(){a("It's been real, New York.");setTimeout(function(){l(["Leave airport."]);d()},1e3)},1e3)},1e3)}function Z(){d();r();setTimeout(function(){b()},1e3)}var e="";var t=[];$(document).ready(function(){n();setTimeout(function(){w()},7e3);$("input.submission").keypress(function(e){if(e.which===13&&$(this).val()&&!$(".loading-gif").is(":visible")&&!$(".alert-text").is(":visible")){var n=y($(this).val());m();if($.inArray(n,t)===-1){v("Action not recognized.");d();return}p(n);setTimeout(function(){switch(n){case"feel-around":S();break;case"flick-lamp-on":x();break;case"feel-around-more":T();break;case"look-around":C();break;case"investigate-bag":k();break;case"draw-curtains":L();break;case"investigate-smartphone":A();break;case"leave-hotel":M();break;case"enter-airport":P();break;case"check-in-luggage":H();break;case"open-bag":B();break;case"investigate-slip-of-paper":j();break;case"finish-check-in":F();break;case"enter-security-checkpoint":I();break;case"investigate-boarding-pass":q();break;case"proceed-to-terminal":R();break;case"fasten-seat-belt":W();break;case"exit-plane":J();break;case"check-text":K();break;case"enter-baggage-claim":G();break;case"find-luggage":Y();break;case"leave-airport":Z();break}},1e3)}})});$(document).on("click",".procedure-action",function(){if(!$(this).hasClass("disabled")){$("input.submission").val($(this).html());$("input.submission").focus();$("input.submission").trigger($.Event("keypress",{which:13}))}});Array.prototype.remove=function(e){var t,n;if((t=this.indexOf(e))>-1){return[].splice.apply(this,[t,t-t+1].concat(n=[])),n}}})()